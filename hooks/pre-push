#!/bin/bash

# Pre-push hook to run lint checks before pushing

set -e

echo "🔍 Running pre-push checks..."

# Check formatting
echo "📝 Checking code formatting..."
if ! cargo fmt --all -- --check; then
    echo "❌ Code formatting check failed!"
    echo "💡 Run 'cargo fmt --all' to fix formatting issues"
    exit 1
fi
echo "✅ Code formatting check passed"

# Run clippy
echo "🔧 Running clippy..."
if ! cargo clippy --all-features --workspace -- -D warnings; then
    echo "❌ Clippy check failed!"
    echo "💡 Fix the clippy warnings before pushing"
    exit 1
fi
echo "✅ Clippy check passed"

echo "✨ All pre-push checks passed!"
